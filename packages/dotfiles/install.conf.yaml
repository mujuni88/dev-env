- defaults:
    link:
      relink: true
      create: true
      force: true # Overwrite existing symlinks
      backup: true # Backup existing files before replacing

- defaults:
    clean:
      force: false # Only remove symlinks created by dotbot

- clean:
    - "~" # Clean dead links in home directory
    - "~/.config" # Clean dead links in config directory
    - "~/.local/bin"

- link:
    # Git configuration
    ~/.gitconfig: git/.gitconfig
    ~/.git-commit-template.txt: git/.git-commit-template.txt

    # Config files in .config directory
    ~/.config/lazygit: lazygit
    ~/.config/nvim: nvim
    ~/.config/starship.toml: starship/starship.toml
    ~/.config/tmux: tmux
    ~/.config/yazi: yazi
    ~/.config/zellij: zellij
    ~/.config/zsh: zsh
    ~/.config/bat: bat
    ~/.config/ghostty: ghostty
    ~/.config/aerospace: aerospace
    ~/.config/mcp: mcp
    ~/.config/carapace: carapace
    ~/.config/ni: ni
    ~/.config/zed: zed
    ~/.config/opencode: opencode
    ~/.config/kanata: kanata

    # IdeaVim configuration
    ~/.ideavimrc: ideavim/.ideavimrc

    # NPM configuration
    ~/.npmrc: .npmrc

    # ZSH configuration
    ~/.zshrc: zsh/.zshrc
    ~/.zlogout: zsh/.zlogout
    ~/.zprofile: zsh/.zprofile
    ~/.zshenv: zsh/.zshenv

    # Claude Code configuration (symlinked files that Claude doesn't modify)
    ~/.claude/statusline.sh: claude/statusline.sh
    ~/.claude/claude-powerline.json: claude/claude-powerline.json
    ~/.claude/hooks: claude/hooks
    ~/.claude/commands: claude/commands
    ~/.claude/skills: claude/skills
    ~/.claude/data: claude/data

    # Scripts directory
    ~/.local/bin/:
      glob: true
      path: scripts/bin/*
      create: true

- shell:
    # Claude Code files that get modified at runtime (copy, don't symlink)
    - [cp -n claude/settings.json ~/.claude/settings.json 2>/dev/null || true, Copying Claude settings.json (if not exists)]
    - [cp -n claude/CLAUDE.md ~/.claude/CLAUDE.md 2>/dev/null || true, Copying Claude CLAUDE.md (if not exists)]
    - [mkdir -p ~/.config/graphite && dcli inject -i graphite/user_config.template -o ~/.config/graphite/user_config, Generating Graphite config from Dashlane]
    - [mkdir -p ~/.local/share/atuin && dcli inject -i atuin/key.template -o ~/.local/share/atuin/key, Restoring Atuin encryption key from Dashlane]
    - [mkdir -p ~/.claude/plugins, Creating claude plugins directory]
    - [chmod +x scripts/bin/*, Making scripts executable]
    - [chmod +x claude/install-plugins.sh, Making plugin installer executable]
    - [./claude/install-plugins.sh, Installing Claude Code plugins]
    - [echo "âœ… Dotfiles installation complete!", Finishing up]

